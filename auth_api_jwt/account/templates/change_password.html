<!DOCTYPE html><html><head><title>Change Password</title></head><body>
<h2>Change Password</h2><form id="cpForm">
  <input id="old_password" type="password" placeholder="Current Password" required><br>
  <input id="password" type="password" placeholder="New Password" required><br>
  <input id="password2" type="password" placeholder="Confirm New Password" required><br>
  <button type="submit">Submit</button>
</form><div id="msg"></div>
<script src="{% static 'js/auth.js' %}"></script>
<script>
  cpForm.onsubmit = async e => {
    e.preventDefault();
    try {
      const { ok, data } = await apiRequest('/api/change-password/', {
        old_password: old_password.value,
        password: password.value,
        password2: password2.value },
        'POST', true);
      msg.innerText = ok ? '✅ '+data.msg : '❌ '+JSON.stringify(data);
    } catch (err) { msg.innerText = err; }
  };
</script>
</body></html>
